<!DOCTYPE html>
<html>
    <head>
        <title>Pixel Art</title>
        <style>
            body {
                background-color: white;
            }

            #canvasContainer {
                height: 750px;
                width: 750px;
                background-color: black;
                padding: 10px;
                overflow: auto;
            }

            #canvas {
                height: 750px;
                width: 750px;;
                display: grid;
                gap: 1px;
            }

            #controls {
                background-color: white;
            }

            .square {
                padding: 0px;
                margin: 0;
                border: 0px solid black;
                aspect-ratio: 1/1;
            }

        </style>
    </head>
    <body>
        <div id = "menu">
            <label for="height">Height (between 1 and 250):</label>
            <input type="number" id="height" name="height" min="1" max="250" step = "1">
            <br>

            <label for="height">Width (between 1 and 250):</label>
            <input type="number" id="width" name="width" min="1" max="250" step = "1">
            <br>
            
            <label for = "bgColor">Background Color</label>
            <input type="color" id="bgColor" name="bgColor" value="#ff0000">
            <br>

            <button onclick="buildGrid()">Go!</button>
        </div>
        <div id = "main" style = "display: none;">
            <div id = "controls">
                <label for = "bgColor">Pencil Color</label>
                <input type="color" id="pencilColor" name="pencilColor" value="#000000">
                <br>

                <label for = "bgColor">Background Color</label>
                <input type="color" id="bgColor2" name="bgColor" value="#ff0000">
                <br>                
                <button onclick="reset()">Reset</button>
            </div>
            <div id = "canvasContainer" >
            
                <div id = "canvas">
    
                </div>
            </div>
            
        </div>
       

        <script>
            heightNum = document.getElementById("height").value = 100;
            widthNum = document.getElementById("width").value = 100;

            function buildGrid(){
                document.getElementById("menu").style.display = "none";
                document.getElementById("main").style.display = "block";

                var heightNum = document.getElementById("height").value;
                var widthNum = document.getElementById("width").value;
                var pixelSize = 10;

                if(heightNum == widthNum){
                    document.getElementById("canvas").style.gridTemplateColumns = "repeat(" + widthNum + ", " + pixelSize + "px)";
                    document.getElementById("canvas").style.gridAutoRows = pixelSize + "px";
                
                } else if (heightNum > widthNum){
                    var ratio = widthNum/heightNum;
                    document.getElementById("canvas").style.height = "750px";
                    document.getElementById("canvas").style.width = 750*ratio + "px";

                    pixelSize = Math.floor((750*ratio - widthNum)/widthNum);
                    console.log(pixelSize);
                    document.getElementById("canvas").style.gridTemplateColumns = "repeat(" + widthNum + ", " + pixelSize + "px)";
                    document.getElementById("canvas").style.gridAutoRows = pixelSize + "px";
                
                } else {
                    var ratio = heightNum/widthNum;
                    console.log(ratio);
                    document.getElementById("canvas").style.width = "750px";
                    document.getElementById("canvas").style.height = 750*ratio + "px";

                    pixelSize = Math.floor((750*ratio - heightNum)/heightNum);
                    document.getElementById("canvas").style.gridTemplateColumns = "repeat(" + widthNum + ", " + pixelSize + "px)";
                    document.getElementById("canvas").style.gridAutoRows = pixelSize + "px";
                }
                
                var pixelTotal = heightNum*widthNum;

                for(var i = 0; i < pixelTotal; i++){
                    const button = document.createElement("button");
                    button.className = "square";
                    button.style.height = pixelSize + "px";
                    button.style.width = pixelSize + "px";
                    button.style.backgroundColor = document.getElementById("bgColor").value;
                    document.getElementById("canvas").appendChild(button);
                }
            }
            
            function reset(){
                document.getElementById("menu").style.display = "block";
                document.getElementById("main").style.display = "none";
                
                let elements = document.getElementsByClassName("square");
                console.log(elements.length);
                while(elements.length > 0){
                    elements[0].parentNode.removeChild(elements[0]);
                }
            }
        </script>

    </body>
</html>